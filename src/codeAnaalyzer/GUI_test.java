/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package codeAnaalyzer;

/**
 *
 * @author Любомир
 */

import java.util.StringTokenizer;
import java.util.*;
import java.util.List;
import javax.swing.*;//for showmessage
import java.io.*;
import static java.lang.System.exit;
import java.util.logging.Level;
import java.util.logging.Logger;
import static javax.swing.JOptionPane.*;
import java.io.File;


public class GUI_test extends javax.swing.JFrame {

    /**
     * Creates new form GUI_test
     */
    public GUI_test() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jButton1 = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextPane1 = new javax.swing.JTextPane();
        jProgressBar1 = new javax.swing.JProgressBar();
        jButton2 = new javax.swing.JButton();
        jScrollPane3 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        jLabel2 = new javax.swing.JLabel();
        jScrollPane4 = new javax.swing.JScrollPane();
        jTextArea2 = new javax.swing.JTextArea();
        jButton3 = new javax.swing.JButton();
        jCheckBox1 = new javax.swing.JCheckBox();
        jButton4 = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTextArea3 = new javax.swing.JTextArea();
        menuBar = new javax.swing.JMenuBar();
        fileMenu = new javax.swing.JMenu();
        openMenuItem = new javax.swing.JMenuItem();
        saveMenuItem = new javax.swing.JMenuItem();
        saveAsMenuItem = new javax.swing.JMenuItem();
        jMenuItem1 = new javax.swing.JMenuItem();
        jMenuItem2 = new javax.swing.JMenuItem();
        exitMenuItem = new javax.swing.JMenuItem();
        editMenu = new javax.swing.JMenu();
        cutMenuItem = new javax.swing.JMenuItem();
        copyMenuItem = new javax.swing.JMenuItem();
        pasteMenuItem = new javax.swing.JMenuItem();
        deleteMenuItem = new javax.swing.JMenuItem();
        jMenuItem3 = new javax.swing.JMenuItem();
        helpMenu = new javax.swing.JMenu();
        contentsMenuItem = new javax.swing.JMenuItem();
        aboutMenuItem = new javax.swing.JMenuItem();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("введіть число в поле справа");

        jButton1.setText("перевірка на парність");
        jButton1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jButton1MouseClicked(evt);
            }
        });

        jScrollPane1.setViewportView(jTextPane1);

        jButton2.setText("Обчислити");
        jButton2.setToolTipText("запуск процесу обчислення слів у тексті, що відображений в полі вище");
        jButton2.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jButton2MouseClicked(evt);
            }
        });

        jTextArea1.setColumns(20);
        jTextArea1.setRows(5);
        jScrollPane3.setViewportView(jTextArea1);

        jLabel2.setText(".");

        jTextArea2.setColumns(20);
        jTextArea2.setRows(5);
        jScrollPane4.setViewportView(jTextArea2);

        jButton3.setText("Результати");
        jButton3.setToolTipText("натисніть для виводу результатів обчислень");
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });

        jCheckBox1.setText("Враховувати коментарі");

        jButton4.setText("Пакетна обробка...");
        jButton4.setToolTipText("обчислення слів у декількох файлах");
        jButton4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton4ActionPerformed(evt);
            }
        });

        jTextArea3.setColumns(20);
        jTextArea3.setRows(5);
        jScrollPane2.setViewportView(jTextArea3);

        fileMenu.setMnemonic('f');
        fileMenu.setText("Файл");

        openMenuItem.setMnemonic('o');
        openMenuItem.setText("Відкрити");
        openMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                openMenuItemActionPerformed(evt);
            }
        });
        fileMenu.add(openMenuItem);

        saveMenuItem.setMnemonic('s');
        saveMenuItem.setText("Зберегти");
        fileMenu.add(saveMenuItem);

        saveAsMenuItem.setMnemonic('a');
        saveAsMenuItem.setText("Зберегти як ...");
        saveAsMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                saveAsMenuItemActionPerformed(evt);
            }
        });
        fileMenu.add(saveAsMenuItem);

        jMenuItem1.setText("Зберегти результати");
        jMenuItem1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem1ActionPerformed(evt);
            }
        });
        fileMenu.add(jMenuItem1);

        jMenuItem2.setText("Завантажити результати");
        jMenuItem2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem2ActionPerformed(evt);
            }
        });
        fileMenu.add(jMenuItem2);

        exitMenuItem.setMnemonic('x');
        exitMenuItem.setText("Вийти");
        exitMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                exitMenuItemActionPerformed(evt);
            }
        });
        fileMenu.add(exitMenuItem);

        menuBar.add(fileMenu);

        editMenu.setMnemonic('e');
        editMenu.setText("Редагування");

        cutMenuItem.setMnemonic('t');
        cutMenuItem.setText("Вирізати");
        cutMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cutMenuItemActionPerformed(evt);
            }
        });
        editMenu.add(cutMenuItem);

        copyMenuItem.setMnemonic('y');
        copyMenuItem.setText("Копіювати");
        copyMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                copyMenuItemActionPerformed(evt);
            }
        });
        editMenu.add(copyMenuItem);

        pasteMenuItem.setMnemonic('p');
        pasteMenuItem.setText("Вставити");
        pasteMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                pasteMenuItemActionPerformed(evt);
            }
        });
        editMenu.add(pasteMenuItem);

        deleteMenuItem.setMnemonic('d');
        deleteMenuItem.setText("Видалити");
        deleteMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                deleteMenuItemActionPerformed(evt);
            }
        });
        editMenu.add(deleteMenuItem);

        jMenuItem3.setText("Очистити пам'ять");
        jMenuItem3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem3ActionPerformed(evt);
            }
        });
        editMenu.add(jMenuItem3);

        menuBar.add(editMenu);

        helpMenu.setMnemonic('h');
        helpMenu.setText("Допомога");

        contentsMenuItem.setMnemonic('c');
        contentsMenuItem.setText("Довідка");
        helpMenu.add(contentsMenuItem);

        aboutMenuItem.setMnemonic('a');
        aboutMenuItem.setText("Про програму");
        aboutMenuItem.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                aboutMenuItemActionPerformed(evt);
            }
        });
        helpMenu.add(aboutMenuItem);

        menuBar.add(helpMenu);

        setJMenuBar(menuBar);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 99, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jButton1)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jLabel1)
                                .addGap(0, 0, Short.MAX_VALUE))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                                        .addComponent(jButton2)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(jButton4)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 174, Short.MAX_VALUE)
                                        .addComponent(jButton3))
                                    .addComponent(jLabel2, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jScrollPane3, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                                        .addComponent(jCheckBox1)
                                        .addGap(0, 0, Short.MAX_VALUE)))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 231, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jScrollPane2)
                            .addComponent(jProgressBar1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jScrollPane3)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jCheckBox1)
                        .addGap(6, 6, 6)
                        .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jButton2)
                            .addComponent(jButton3)
                            .addComponent(jButton4)))
                    .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 437, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jProgressBar1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 20, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jButton1)
                        .addComponent(jLabel1))))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void exitMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_exitMenuItemActionPerformed
        System.exit(0);
    }//GEN-LAST:event_exitMenuItemActionPerformed

    private void jButton1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton1MouseClicked
        // Перевірка чисел на парність
        int Parity_check = Integer.parseInt(jTextPane1.getText());
        String CheckResult = Parity_check%2==0?"Це парне число":"Це непарне число";
        jLabel1.setText(CheckResult);
        //JOptionPane.showMessageDialog(null, "Ви ввели число: "+Parity_check+"\n Це "+CheckResult);
//        word.add(CheckResult);
//        String tt = word.get(0)+"("+word.size();
//        JOptionPane.showMessageDialog(rootPane, tt);
    }//GEN-LAST:event_jButton1MouseClicked

//    int Vocabulary_size = 1000;
//    String Vocabulary[] = new String[Vocabulary_size];
    //int word_used[] = new int[Vocabulary_size];
    int wordscount = 0;
    int charscount = 0;
    List<String> word = new ArrayList<String>();
    List<Integer> word_used = new ArrayList<Integer>();
    //List<int> wordindex = new ArrayList<int>();
    
    public int loadresult(String folder)
    {
        String filepath = folder + "\\" + "words.txt";
        try{
            FileInputStream fis = new FileInputStream(filepath);
            BufferedReader br = new BufferedReader(new InputStreamReader(fis,"UTF-8"));
            while(br.ready())
            {                
                word.add(br.readLine());
            }
            br.close();
        }catch(FileNotFoundException e){System.out.println("Файл не знайдено");}
         catch(IOException e){System.out.println("Помилка вводу/виводу: "+filepath);}
        filepath = folder + "\\" + "words_counter.txt";
        try{
            FileInputStream fis = new FileInputStream(filepath);
            BufferedReader br = new BufferedReader(new InputStreamReader(fis,"UTF-8"));
            while(br.ready())
            {
                word_used.add(Integer.parseInt(br.readLine()));
            }
            br.close();
        }catch(FileNotFoundException e){System.out.println("Файл не знайдено");}
         catch(IOException e){System.out.println("Помилка вводу/виводу: "+filepath);}
        filepath = folder + "\\" + "words_analyzed.txt";
        try{
            FileInputStream fis = new FileInputStream(filepath);
            BufferedReader br = new BufferedReader(new InputStreamReader(fis,"UTF-8"));           
            wordscount = Integer.parseInt(br.readLine());
            charscount = Integer.parseInt(br.readLine());
            br.close();
        }catch(FileNotFoundException e){System.out.println("Файл не знайдено");}
         catch(IOException e){System.out.println("Помилка вводу/виводу: "+filepath);}
        System.out.println("Успішне завантаження з папки: "+folder);
        return 1;
    }
    
    public int saveresult(String folder)
    {
        File foldername = new File(folder);
        foldername.mkdir();
        String filepath = folder + "\\" + "words.txt";
        try{
            FileOutputStream fos = new FileOutputStream(filepath);
            BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));
            for(int i = 0; i < word.size(); i++)
            {
                bw.write(word.get(i));
                bw.newLine();
            }
            bw.close();
        }catch(FileNotFoundException e){System.out.println("Файл не знайдено");}
         catch(IOException e){System.out.println("Помилка вводу/виводу: "+filepath);}
        filepath = folder + "\\" + "words_counter.txt";
        try{
            FileOutputStream fos = new FileOutputStream(filepath);
            BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));
            for(int i = 0; i < word.size(); i++)
            {
                int value = word_used.get(i);
                String write = String.valueOf(value);
                bw.write(write);    
                bw.newLine();
            }
            bw.close();
        }catch(FileNotFoundException e){System.out.println("Файл не знайдено");}
         catch(IOException e){System.out.println("Помилка вводу/виводу: "+filepath);}
        filepath = folder + "\\" +"words_analyzed.txt";
        try{
            FileOutputStream fos = new FileOutputStream(filepath);
            BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));            
            bw.write(String.valueOf(wordscount)); 
            bw.newLine();
            bw.write(String.valueOf(charscount));
            bw.close();
        }catch(FileNotFoundException e){System.out.println("Файл не знайдено");}
         catch(IOException e){System.out.println("Помилка вводу/виводу: "+filepath);}
        System.out.println("Успішний запис даних у: "+folder);
        return 1;
    }
    
    public int write_to_voc(String s)//записує слово до словника
    {
        word.add(s);
        word_used.add(1);
        wordscount++;
        return 0;        
    }
    
    private int comparer(String s)// функція виявлення нових слів  
    {                           //і збільшення індексу, якщо таке слово вже зустрічалось
        //StringTokenizer str = new StringTokenizer(s);
        charscount += s.length();
        if (word.isEmpty())
        { 
            //JOptionPane.showMessageDialog(null, "if word.isEmpty");
            write_to_voc(s);            
            return 1;
        }
        else
        {    
            for (int i = 0; i < word.size(); i++)
            {
                //System.out.println(s); System.out.println(word.get(i)); //debug
                //JOptionPane.showMessageDialog(null, "loop");
                if (word.get(i).equals(s))
                {
                    //слово вже є в словнику, додати до лічильника 1 і вийти                   
                    int index = (int)word_used.get(i)+1;
                    word_used.set(i, index);                    
                    wordscount++;
                    return 0;                    
                }
                else
                {
                    if(i == word.size() - 1)//список пройдено, збігів не знайдено
                    {
                        //додаємо слово до списку
                        write_to_voc(s);                       
                        return 1;
                    }
                }
            }
        }
        return 0;
    }
   // КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ
    // КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ
    /* КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ
     КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ КОМЕНТАРІ*/
    private int find(String text, String ignored_chars, int type)//пошук слів і операторів
    {
        if (text.isEmpty()) return 0;
        StringTokenizer str = new StringTokenizer(text);//пошук
       // int index = 0;
        //if (!(str.hasMoreTokens())) return 0;
        while(str.hasMoreTokens()){
//            double percent = (index++)/(str.countTokens()/100.0);
//                String statusBar = Double.toString(percent);                
//                System.out.println("Token analysis status: "+statusBar);
//                jProgressBar1.setString(statusBar);
//                rootPane.updateUI();                
//                jProgressBar1.updateUI();
            String s;
            //if (str.nextToken(ignored_chars).isEmpty()) return 0;
            try{
            s = str.nextToken(ignored_chars);
            
            //виклик функції порівняння
            //тип визначає символи для аналізу - 1 для літер і 0 для інших символів
            if (type==1) comparer(s);
            if (type==0){
                //char[] sign = {'(',')','{','}','[',']',';','.','|'};
                for(int i=0; i < s.length();i++)//шукаємо дужки та інші парні символи
                {
//                    if (s.charAt(i)=='\t'){
//                        s = s.substring(i, i+1);
//                    }
                    if((s.charAt(i)=='(')||(s.charAt(i)==')')||(s.charAt(i)==';')
                            ||(s.charAt(i)=='{')||(s.charAt(i)=='}')||(s.charAt(i)==',')
                            ||(s.charAt(i)==':')||(s.charAt(i)=='*')||(s.charAt(i)=='\'')
                            ||(s.charAt(i)=='\"')||(s.charAt(i)=='<')||(s.charAt(i)=='>')
                            ||(s.charAt(i)=='[')||(s.charAt(i)==']')||(s.charAt(i)=='+')
                            ||(s.charAt(i)=='-')||(s.charAt(i)=='{')||(s.charAt(i)=='}')
                            ||(s.charAt(i)=='^')||(s.charAt(i)=='&')||(s.charAt(i)=='=')
                            ||(s.charAt(i)=='|')||(s.charAt(i)=='%')||(s.charAt(i)=='#')
                            ||(s.charAt(i)=='.')||(s.charAt(i)==',')||(s.charAt(i)=='!')
                            ||(s.charAt(i)=='\t')||(s.charAt(i)=='\n'))
                    {                
                        //words_in_voc = i;                    
                        String character = s.substring(i, i+1);
                        if (!(character.isEmpty())){
                            comparer(character);
                            //int index = word_used.get(i) + 1;
                            //word_used.set(word.indexOf(s.substring(i, i+1)), index);
                            //System.out.println(s.substring(i, i+1));                    
                            //return 1; 
                        }
                    }
                    else
                    {
                        if (i == s.length()-1) {
                            s = s.replace('(',' ');
                            s = s.replace(')',' ');
                            s = s.replace(';',' ');
                            //s = s.replace(':',' ');                        
                            s = s.trim();
                            comparer(s);
                        }                        
                    }                          
                } 
            }
            }catch (Exception e){System.out.println("Помилка при відсіюванні групи: "+ignored_chars);}
            //System.out.println(word);  //debug          
            }
        return 1;
    }

    private int printresult()
    {
        String info = ""; //int words_in_voc = 0;
       // jTable1.firePropertyChange(rowCount, 10, word.size());     
        System.out.println("Preparing result.... ");
        for (int i=0; i < word.size();i++)
        {             
            info += " " + word.get(i) + "  " + word_used.get(i) + " \n";
            double percent = (i+1)/(word.size()/100.0);
            String statusBar = Double.toString(percent);
            System.out.println(statusBar+"% ready");
        }
        
        jTextArea2.setText(info);
        //JOptionPane.showMessageDialog(null, info);
        String message = "Всього слів у тексті: "+wordscount+". Всього символів: "+charscount+".\n "
                + "Унікальних слів: "+ word.size();
        jLabel2.setText(message);
        return 1;
    }
    
    public int analyze(String text)
    {
        //String text = JOptionPane.showInputDialog("Введіть текст");
        String chars = " abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
                + "абвгґдеєжзиіїйклмнопрстуфхцчшщьюяАБВГҐДЕЄЖЗИІЇКЛМНОПРСТУФХЦЧШЩЬЮЯ"
                + "1234567890~_Ⓡ    \n\t";
        String sign = " .,;:!?+=*-  {(//<[]>)}\"\'|&\n\t  \\    ";
        
        String figure_bracket1 = chars + "} .,;:!?+=*-(//<[]>)\"\'|&\n\t  \\  ";
        String figure_bracket2 = chars + "{ .,;:!?+=*-(//<[]>)\"\'|&\n\t  \\  ";
        
        String bracket1 = chars + ") .,;:!?+=*-{}//<>[]\"\'|&\n\t  \\ ";
        String bracket2 = chars + "( .,;:!?+=*-{}//<>[]\"\'|&\n\t  \\ ";
        
        
        String square_bracket1 = chars + "[ ,.;:!?+=*-{}()//<>\"\'|&\n\t  \\  ";
        String square_bracket2 = chars + "] ,.;:!?+=*-{}()//<>\"\'|&\n\t  \\  ";
        
        String moreThan = chars + "> ,.;:!?+=*-{}()//[]\"\'|&\n\t  \\ ";
        String lessThan = chars + "< ,.;:!?+=*-{}()//[]\"\'|&\n\t  \\ ";
        
        String doubleQuotes = chars + " ,.;:!?+=*-{}()//[]<>\'|&\n\t  \\  ";
        String quotes = chars + " ,.;:!?+=*-{}()//[]<>\"|&\n\t  \\    ";
        
        String semicolon = chars + " .,:!?+=*-{}()//[]<>\"\'|&\n\t  \\    ";
        String comma = chars + " .;:!?+=*-{}()[]//<>\"\'|&\n\t  \\    ";
        String dot = chars + " ,;:!?+=*-{}()[]//<>\"\'|&\n\t  \\  ";
        
        String double_dot = chars + " .,;!?+=*-{}()//<>[]\"\'|&\n\t  \\   ";
        String multiply = chars + " .,;:!?+=-{}()//<>[]\"\'|&\n\t  \\ ";
        String plus = chars + " .,;:!?=*-{}()//<>[]\"\'|&\n\t  \\ ";
        String minus = chars + " .,;:!?+=*{}()//<>[]\"\'|&\n\t  \\    ";
        String equal = chars + " .,;:!?-+*{}()//<>[]\"\'|&\n \t \\    ";
        String sign_OR = chars + " .,;:!?=-+*{}()//<>[]\"\'&\n\t \\  ";
        
        String exclamationMark = chars + " ,.;:?+=*-{}()[]//<>\"\'|&\n\t  \\  ";
        String questionMark = chars + " ,.;:!+=*-{}()[]//<>\"\'|&\n\t  \\ ";

        String[] destinationChars = {figure_bracket1, figure_bracket2, 
        bracket1, bracket2, square_bracket1, square_bracket2, moreThan,
        lessThan, doubleQuotes, quotes, semicolon, comma, dot, double_dot,
        multiply, plus, minus, equal, sign_OR, exclamationMark, questionMark};
        if (text.isEmpty()) {
        JOptionPane.showMessageDialog(rootPane, "Текстове поле порожнє!","Помилка",ERROR_MESSAGE);        
        }
        else
        if (!(jCheckBox1.isSelected()))//команда для відсіювання коментарів у коді
        {
            String temp = ""; int beginIndex = 0; int endIndex = 0;
            int is_comment = 0;
            String filtered_text = "";
            for (int i = 0; i < text.length(); i++)
            {
                if (text.charAt(i)=='\n')
                {
                    endIndex = i;
                    temp = text.substring(beginIndex, endIndex);
//<editor-fold defaultstate="collapsed" desc=" пошук входжень символів коментарів - не працює ">
/**
 *          пошук входжень символів коментарів - не працює                    
 *                   int index_un = temp.indexOf("//");
 *                  int index_m = temp.indexOf("/*");
 *                    int index_endm = temp.indexOf("*");
 *                    if ((index_m >= 0)&&(index_endm >= 0))
 *                    {
 *                        filtered_text += temp.substring(0,index_m) + temp.substring(index_endm, temp.length());                        
 *                    }
 *                    if (index_un >= 0)
 *                    {                            
 *                        filtered_text += temp.substring(0, index_un);
 *                        break;
 *                    }
 *                    if(index_m >= 0)
 *                    {
 *                        is_comment = 1;                            
 *                        filtered_text += temp.substring(0, index_m);
 *                        break;
 *                    }
 *                    if(index_endm >= 0)
 *                    {
 *                        is_comment = 0;                            
 *                        filtered_text += temp.substring(index_endm, temp.length());
 *                        break;
 *                    }
 *                    else 
 *
 */
                    //</editor-fold>
                    
                    //комент
                    for(int j = 0; j < temp.length(); j++)
                    {
                        if (j < temp.length()-2){
                            if((is_comment == 0)&&(temp.charAt(j)=='/')&&(temp.charAt(j+1)=='*'))//починається багаторядковий коментар
                            {
                                is_comment = 1;
                                temp = temp.substring(0,j);
                                continue;
                            }
                            if((is_comment == 1)&&(temp.charAt(j)=='*')&&(temp.charAt(j+1)=='/'))//а тут він закінчується
                            {
                                is_comment = 0;
                                temp = temp.substring(j,temp.length());
                                continue;
                            }
                            if((temp.charAt(j)=='/')&&(temp.charAt(j+1)=='/'))//однорядковий коментар
                            {                                
                                temp = temp.substring(0,j);
                                break;
                            }
                            if (temp.charAt(j)=='\n') {
                            filtered_text += temp;
                            temp = "";
                            break;
                            }
                        }

                    }                    
                    filtered_text += temp;
                    beginIndex = endIndex;
                }                
            }
            text = filtered_text;  
        }        
        find(text,sign,1);
        for (int i = 0; i < destinationChars.length; i++)
        {
            find(text, destinationChars[i], 0);
        }
        //find(text,chars,0);

//        find(text,figure_bracket1,0);
//        find(text,figure_bracket2,0);
//
//        find(text,bracket1,0);
//        find(text,bracket2,0);
//
//        find(text,semicolon,0);
//        find(text,comma,0);
//        find(text,dot,0);
//        find(text,square_bracket1,0);
//        find(text,square_bracket2,0);
    //        find(text,sign_OR,0);     
        return 1;
    }
    
    private void jButton2MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton2MouseClicked
        // TODO add your handling code here:
        String text = jTextArea1.getText();
        analyze(text);
    }//GEN-LAST:event_jButton2MouseClicked

    private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem1ActionPerformed
        saveresult(JOptionPane.showInputDialog(rootPane, "Введіть назву ", "Очікування на ввід", INFORMATION_MESSAGE));    
    }//GEN-LAST:event_jMenuItem1ActionPerformed

    private void jMenuItem2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem2ActionPerformed
     // TODO add your handling code here:
            loadresult(JOptionPane.showInputDialog(rootPane, "Введіть назву ", "Очікування на ввід", INFORMATION_MESSAGE));     
    }//GEN-LAST:event_jMenuItem2ActionPerformed

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton3ActionPerformed
        // TODO add your handling code here:
        printresult();
    }//GEN-LAST:event_jButton3ActionPerformed

    private void pasteMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_pasteMenuItemActionPerformed
        // TODO add your handling code here:
        jTextArea1.paste();
    }//GEN-LAST:event_pasteMenuItemActionPerformed

    private void copyMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_copyMenuItemActionPerformed
        // TODO add your handling code here:
        jTextArea1.copy();
    }//GEN-LAST:event_copyMenuItemActionPerformed

    private void cutMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cutMenuItemActionPerformed
        // TODO add your handling code here:
        jTextArea1.cut();
    }//GEN-LAST:event_cutMenuItemActionPerformed

    private void aboutMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_aboutMenuItemActionPerformed
        // TODO add your handling code here:
        String about = "Програма для підрахунку слів та літер у текстах і сирцевих кодах програм"+
                "\n Ⓡ автор Любомир Федевич. 2014.";
        JOptionPane.showMessageDialog(rootPane, about, "Про програму", INFORMATION_MESSAGE);        
    }//GEN-LAST:event_aboutMenuItemActionPerformed

    private void openMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_openMenuItemActionPerformed
        // TODO add your handling code here:
        String fromFile = "";
        //!!!!fileDialog
        jTextArea1.setText(fromFile);
    }//GEN-LAST:event_openMenuItemActionPerformed

    private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton4ActionPerformed
        // TODO add your handling code here:
        int fileCount = Integer.parseInt(JOptionPane.showInputDialog(rootPane, "Введіть кількість файлів", "Очікування вводу", INFORMATION_MESSAGE));
        String folder = "C:\\temp\\SourceFilesForAnalyze\\";
        String status = "Проаналізовано файли: \n";
        jProgressBar1.setMaximum(fileCount);
        for(int i = 0; i < fileCount; i++)
        {
            String filename = Integer.toString(i) + ".txt";
            String filepath = folder + filename;
            String fileContents = "";
            try{
                FileInputStream fis = new FileInputStream(filepath);
                BufferedReader br = new BufferedReader(new InputStreamReader(fis,"UTF-8"));
                while(br.ready())
                {                
                    fileContents += br.readLine() + "\n";
                    
                }
                br.close();
                analyze(fileContents);
                status += filename + "\n";
                jTextArea3.setText(status);
                double percent = (i+1)/(fileCount/100.0);
                String statusBar = Double.toString(percent);
                System.out.println(statusBar+"% done." + "Analyzed file: " + filepath);
                jProgressBar1.setValue(i+1);
                jProgressBar1.setString(statusBar);
                rootPane.updateUI();                
                jProgressBar1.updateUI();
            }catch(FileNotFoundException e){System.out.println("Файл не знайдено: "+filepath);}
             catch(IOException e){System.out.println("Помилка вводу/виводу: "+filepath);}
            
        }
    }//GEN-LAST:event_jButton4ActionPerformed

    private void saveAsMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_saveAsMenuItemActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_saveAsMenuItemActionPerformed

    private void deleteMenuItemActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_deleteMenuItemActionPerformed
        // TODO add your handling code here:
        jTextArea1.setText("");
    }//GEN-LAST:event_deleteMenuItemActionPerformed

    private void jMenuItem3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem3ActionPerformed
        // TODO add your handling code here:
        word.clear();
        word_used.clear();
        charscount = 0;
        wordscount = 0;
    }//GEN-LAST:event_jMenuItem3ActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(GUI_test.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(GUI_test.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(GUI_test.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(GUI_test.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new GUI_test().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JMenuItem aboutMenuItem;
    private javax.swing.JMenuItem contentsMenuItem;
    private javax.swing.JMenuItem copyMenuItem;
    private javax.swing.JMenuItem cutMenuItem;
    private javax.swing.JMenuItem deleteMenuItem;
    private javax.swing.JMenu editMenu;
    private javax.swing.JMenuItem exitMenuItem;
    private javax.swing.JMenu fileMenu;
    private javax.swing.JMenu helpMenu;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JCheckBox jCheckBox1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JMenuItem jMenuItem1;
    private javax.swing.JMenuItem jMenuItem2;
    private javax.swing.JMenuItem jMenuItem3;
    private javax.swing.JProgressBar jProgressBar1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JTextArea jTextArea2;
    private javax.swing.JTextArea jTextArea3;
    private javax.swing.JTextPane jTextPane1;
    private javax.swing.JMenuBar menuBar;
    private javax.swing.JMenuItem openMenuItem;
    private javax.swing.JMenuItem pasteMenuItem;
    private javax.swing.JMenuItem saveAsMenuItem;
    private javax.swing.JMenuItem saveMenuItem;
    // End of variables declaration//GEN-END:variables

}
